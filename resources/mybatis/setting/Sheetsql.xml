<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sheet">
	<insert id="insertSongInfo" parameterType="sdto">
		INSERT INTO Sheet.song_info(songName, artist, producerName, genre, keyName, bpm, songForm, beat, songId, userId) values(#{songName}, #{artist}, #{producerName}, #{genre}, #{keyName}, #{bpm}, #{songForm}, #{beat}, #{songId}, #{userId});
	</insert>
	<insert id="insertInstInfo" parameterType="idto">
		INSERT INTO Sheet.inst_info(songId, instName, trackNum) values(#{songId}, #{instName}, #{trackNum});
	</insert>
	<insert id="insertChordInfo" parameterType="cdto">
		INSERT INTO Sheet.chord_info(songId, chord, measureNum) values(#{songId}, #{chord}, #{measureNum});
	</insert>
	
	<select id="selectAllSong" resultType="hashmap">
		select * from Sheet.song_info;
	</select>

	<select id="selectAllInst" resultType="map">
		select instName from Sheet.inst_list;
	</select>
	
	<select id = "getSongName" parameterType = "HashMap" resultType = "int">
		SELECT count(*) FROM Sheet.song_info WHERE songName=#{songName};
	</select>
	
	<select id = "selectInstInfo" parameterType = "map" resultType = "idto">
		select * from Sheet.inst_info where songId = #{songID};
	</select>
	
	<select id = "selectChordInfo" parameterType = "map" resultType = "cdto">
		select * from Sheet.chord_info where songId = #{songID};

	</select>
	
	<select id = "selectEachSong" parameterType = "map" resultType = 'sdto'>
		select * from Sheet.song_info where producerName = #{producerName};
	</select>
	
	<select id = "selectSongInfo" parameterType = "map" resultType = 'sdto'>
		select * from Sheet.song_info where songId = #{songID};
	</select>

	<update id="updateSongInfo" parameterType="sdto">
		update Sheet.song_info set songName = #{songName}, artist = #{artist}, genre = #{genre}, keyName = #{keyName},bpm = #{bpm}, songForm = #{songForm}, beat = #{beat}
		where songId = #{songId};
	</update>
	
	<update id="updateInstInfo" parameterType="idto">
		update Sheet.inst_info set instName = #{instName} where songId = #{songId} and trackNum = #{trackNum};
	</update>
	
	<update id="updateChordInfo" parameterType="cdto">
		update Sheet.chord_info set chord = #{chord} where songId = #{songId} and measureNum = #{measureNum};
	</update>
	
	<delete id = "deleteSong" parameterType = "map">
		delete from Sheet.song_info where songId = #{songId};
	</delete>
</mapper>